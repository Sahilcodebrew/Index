<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laundromat Attendant</title>
    <style>
        :root {
            --primary-color: #4a6cf7;
            --primary-dark: #3a5bd9;
            --secondary-color: #6e8efb;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --gray-color: #6c757d;
            --border-color: #e9ecef;
            --white: #ffffff;
            --text-color: #212529;
            --text-muted: #6c757d;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        /* Dark mode styles */
        body.dark-mode {
            --primary-color: #6e8efb;
            --primary-dark: #5a7de8;
            --secondary-color: #8aa4ff;
            --light-color: #121212;
            --dark-color: #f8f9fa;
            --gray-color: #adb5bd;
            --border-color: #2a2a2a;
            --white: #1e1e1e;
            --text-color: #f5f5f5;
            --text-muted: #adb5bd;
            background-color: var(--light-color);
            color: var(--text-color);
        }

        body.dark-mode header {
            background: linear-gradient(135deg, #4a4a4a, #2a2a2a);
        }

        body.dark-mode .nav-menu {
            background-color: var(--white);
            color: var(--text-color);
        }

        body.dark-mode .nav-menu ul li {
            border-bottom: 1px solid var(--border-color);
        }

        body.dark-mode .nav-menu ul li:hover {
            background-color: var(--border-color);
        }

        body.dark-mode .clothes-section {
            background-color: var(--white);
            color: var(--text-color);
        }

        body.dark-mode .section-header {
            border-bottom: 1px solid var(--border-color);
        }

        body.dark-mode .clothes-card {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        body.dark-mode .clothes-info h3 {
            color: var(--text-color);
        }

        body.dark-mode .clothes-info p {
            color: var(--text-muted);
        }

        body.dark-mode footer {
            background-color: var(--white);
        }

        body.dark-mode .footer-btn {
            color: var(--text-muted);
        }

        body.dark-mode .footer-btn.active, 
        body.dark-mode .footer-btn:hover {
            color: var(--primary-color);
        }

        body.dark-mode .modal-content, body.dark-mode .qa-modal-content {
            background-color: var(--white);
            color: var(--text-color);
        }

        body.dark-mode .modal-header, body.dark-mode .qa-modal-header {
            background: var(--white);
            border-bottom: 1px solid var(--border-color);
        }

        body.dark-mode .close-btn {
            color: var(--text-muted);
        }

        body.dark-mode .profile-option {
            border-bottom: 1px solid var(--border-color);
        }

        body.dark-mode .profile-option:hover {
            background-color: var(--border-color);
        }

        body.dark-mode .attendance-record,
        body.dark-mode .order-history-item,
        body.dark-mode .transaction-item,
        body.dark-mode .wallet-balance {
            background-color: var(--border-color);
            color: var(--text-color);
        }

        body.dark-mode .order-history-header,
        body.dark-mode .order-history-timeline,
        body.dark-mode .order-history-details {
            border-bottom: 1px solid var(--border-color);
            border-top: 1px solid var(--border-color);
        }

        body.dark-mode .form-group input,
        body.dark-mode .qa-form-group textarea,
        body.dark-mode .search-container input {
            background-color: var(--border-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        body.dark-mode .search-container button {
            background-color: var(--primary-color);
            color: var(--text-color);
        }

        /* --- LOGIN OVERLAY --- */
        .login-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(30, 32, 36, 0.96);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s;
        }
        .login-overlay .login-box {
            background: var(--white);
            color: var(--text-color);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.18);
            padding: 36px 28px 28px 28px;
            min-width: 320px;
            max-width: 90vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        .login-overlay .login-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 18px;
            color: var(--primary-color);
        }
        .login-overlay .login-form {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .login-overlay .login-form label {
            font-weight: 500;
            margin-bottom: 4px;
        }
        .login-overlay .login-form input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
            background: var(--light-color);
            color: var(--text-color);
        }
        .login-overlay .login-form input:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        .login-overlay .login-form .login-btn {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            padding: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            transition: background 0.2s;
        }
        .login-overlay .login-form .login-btn:hover {
            background: var(--primary-dark);
        }
        .login-overlay .login-error {
            color: var(--danger-color);
            font-size: 0.98rem;
            margin-top: 6px;
            min-height: 20px;
        }
        .login-overlay .login-brand {
            font-size: 1.1rem;
            color: var(--gray-color);
            margin-bottom: 18px;
            letter-spacing: 1px;
        }
        body.dark-mode .login-overlay .login-box {
            background: #23242a;
            color: var(--text-color);
        }
        body.dark-mode .login-overlay .login-form input {
            background: var(--border-color);
            color: var(--text-color);
        }
        body.dark-mode .login-overlay {
            background: rgba(30, 32, 36, 0.98);
        }

        /* Make Modal Headers Sticky */
        .modal-header, .qa-modal-header {
            position: sticky;
            top: 0;
            background: inherit;
            z-index: 2;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: var(--white);
            padding: 15px 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        .logo i {
            font-size: 28px;
            margin-right: 10px;
        }

        .welcome {
            font-size: 20px;
            font-weight: 500;
        }

        .menu-btn {
            font-size: 28px;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s;
            background: none;
            border: none;
            color: var(--white);
        }

        .menu-btn:hover {
            transform: scale(1.1);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--white);
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .nav-menu {
            display: none;
            background-color: var(--white);
            position: absolute;
            top: 70px;
            right: 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 100;
            width: 250px;
            overflow: hidden;
        }

        .nav-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .nav-menu ul li {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            transition: all 0.2s;
            cursor: pointer;
        }

        .nav-menu ul li:last-child {
            border-bottom: none;
        }

        .nav-menu ul li:hover {
            background-color: var(--light-color);
        }

        .nav-menu ul li i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            color: var(--primary-color);
        }

        main {
            padding: 25px;
            min-height: calc(100vh - 160px);
        }

        /* Search Container */
        .search-container {
            display: flex;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-container input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 4px 0 0 4px;
            font-size: 16px;
            outline: none;
        }

        .search-container button {
            padding: 12px 20px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .search-container button:hover {
            background-color: var(--primary-dark);
        }

        .attendance-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .attendance-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .attendance-btn.in {
            background-color: var(--success-color);
            color: var(--white);
        }

        .attendance-btn.out {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .attendance-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .attendance-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-color);
            position: relative;
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--primary-color);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Clothes sections */
        .clothes-section {
            background-color: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .section-header h2 {
            color: var(--primary-color);
            margin: 0;
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }

        .pending .section-icon {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        .active-wash .section-icon {
            background-color: var(--info-color);
            color: var(--white);
        }

        .pending-dryer .section-icon {
            background-color: #fd7e14;
            color: var(--white);
        }

        .active-dry .section-icon {
            background-color: #6f42c1;
            color: var(--white);
        }

        .done .section-icon {
            background-color: var(--success-color);
            color: var(--white);
        }

        .rejected .section-icon {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .clothes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }

        .clothes-card {
            background-color: var(--light-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s;
            position: relative;
        }

        .clothes-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .status-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .pending-badge {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        .washing-badge {
            background-color: var(--info-color);
            color: var(--white);
        }

        .pending-dryer-badge {
            background-color: #fd7e14;
            color: var(--white);
        }

        .drying-badge {
            background-color: #6f42c1;
            color: var(--white);
        }

        .done-badge {
            background-color: var(--success-color);
            color: var(--white);
        }

        .rejected-badge {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .clothes-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .clothes-info {
            padding: 12px;
        }

        .clothes-info h3 {
            margin: 0 0 5px 0;
            font-size: 14px;
            color: var(--text-color);
        }

        .clothes-info p {
            margin: 0;
            font-size: 12px;
            color: var(--text-muted);
        }

        .clothes-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .clothes-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .clothes-btn.wash {
            background-color: var(--info-color);
            color: var(--white);
        }

        .clothes-btn.dry {
            background-color: #6f42c1;
            color: var(--white);
        }

        .clothes-btn.approve {
            background-color: var(--success-color);
            color: var(--white);
        }

        .clothes-btn.reject {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .clothes-btn.reprocess {
            background-color: var(--primary-color);
            color: var(--white);
        }

        .clothes-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .clothes-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .clothes-timer {
            font-size: 11px;
            margin-top: 5px;
            text-align: center;
            font-weight: bold;
            color: var(--text-color);
            height: 14px;
        }

        /* QA Modal */
        .qa-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .qa-modal-content {
            background-color: var(--white);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalOpen 0.3s ease;
        }

        .qa-modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .qa-modal-header h2 {
            margin: 0;
            color: var(--primary-color);
        }

        .qa-modal-body {
            padding: 20px;
        }

        .qa-form-group {
            margin-bottom: 15px;
        }

        .qa-form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .qa-form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
            min-height: 100px;
            resize: vertical;
        }

        .qa-modal-footer {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .qa-submit-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }

        .qa-submit-btn.cancel {
            background-color: var(--gray-color);
            color: var(--white);
        }

        .qa-submit-btn.submit {
            background-color: var(--primary-color);
            color: var(--white);
        }

        footer {
            display: flex;
            justify-content: space-around;
            background-color: var(--white);
            padding: 15px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
            position: fixed;
            bottom: 0;
            width: 100%;
        }

        .footer-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: none;
            border: none;
            color: var(--gray-color);
            font-size: 12px;
            cursor: pointer;
            padding: 5px 10px;
            transition: all 0.2s;
        }

        .footer-btn i {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .footer-btn.active, .footer-btn:hover {
            color: var(--primary-color);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalOpen 0.3s ease;
        }

        @keyframes modalOpen {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            margin: 0;
            color: var(--primary-color);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray-color);
        }

        .modal-body {
            padding: 20px;
        }

        .profile-options {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .profile-option {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            transition: all 0.2s;
            cursor: pointer;
        }

        .profile-option:last-child {
            border-bottom: none;
        }

        .profile-option i {
            margin-right: 15px;
            font-size: 20px;
            color: var(--primary-color);
        }

        .profile-option:hover {
            background-color: var(--light-color);
        }

        .attendance-record {
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--light-color);
            border-radius: 5px;
        }

        .profile-info {
            text-align: center;
            margin-bottom: 20px;
        }

        .profile-info img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid var(--primary-color);
        }

        .profile-info h3 {
            margin: 5px 0;
            color: var(--text-color);
        }

        .profile-info p {
            margin: 5px 0;
            color: var(--text-muted);
        }

        .password-form {
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }

        .submit-btn {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        .submit-btn:hover {
            background-color: var(--primary-dark);
        }

        /* Wallet Styles */
        .wallet-balance {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: var(--light-color);
            border-radius: 8px;
        }

        .wallet-amount {
            font-size: 28px;
            font-weight: bold;
            color: var(--success-color);
            margin: 10px 0;
        }

        .wallet-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .wallet-action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .wallet-action-btn.add-money {
            background-color: var(--success-color);
            color: var(--white);
        }

        .wallet-action-btn.withdraw {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .wallet-action-btn:hover {
            opacity: 0.9;
        }

        .wallet-transactions {
            margin-top: 20px;
        }

        .transaction-item {
            padding: 10px;
            margin-bottom: 10px;
            background-color: var(--light-color);
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
        }

        .transaction-amount.credit {
            color: var(--success-color);
        }

        .transaction-amount.debit {
            color: var(--danger-color);
        }

        .transaction-date {
            font-size: 12px;
            color: var(--text-muted);
        }

        .transaction-details {
            font-size: 14px;
        }

        /* Add Money Modal */
        .money-form {
            margin-top: 20px;
        }

        /* Order History Styles */
        .order-history-item {
            padding: 15px;
            margin-bottom: 15px;
            background-color: var(--light-color);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .order-history-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .order-history-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-pending {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        .status-washing {
            background-color: var(--info-color);
            color: var(--white);
        }

        .status-pending-dryer {
            background-color: #fd7e14;
            color: var(--white);
        }

        .status-drying {
            background-color: #6f42c1;
            color: var(--white);
        }

        .status-done {
            background-color: var(--success-color);
            color: var(--white);
        }

        .status-rejected {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .order-history-details {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }

        .order-history-img {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
        }

        .order-history-info {
            flex: 1;
        }

        .order-history-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }

        .order-history-info p {
            margin: 0;
            font-size: 14px;
            color: var(--text-muted);
        }

        .order-history-timeline {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        .timeline-item {
            display: flex;
            margin-bottom: 5px;
            font-size: 13px;
        }

        .timeline-time {
            width: 80px;
            color: var(--text-muted);
        }

        .timeline-event {
            flex: 1;
        }

        .timeline-icon {
            width: 20px;
            text-align: center;
            margin-right: 5px;
            color: var(--primary-color);
        }

        .view-details-btn {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 5px;
        }

        .order-details-btn {
            background-color: var(--gray-color);
            color: var(--white);
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-top: 5px;
            width: 100%;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--gray-color);
        }

        @media (max-width: 600px) {
            header {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px 10px;
            }
            .logo {
                font-size: 20px;
            }
            .welcome {
                font-size: 16px;
                margin-top: 4px;
            }
            main {
                padding: 12px 4px 80px 4px;
            }
            .modal-content, .qa-modal-content {
                max-width: 98vw;
                padding: 0;
            }
            
            .attendance-options {
                flex-direction: column;
                gap: 10px;
            }
            
            .tabs {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 5px;
            }
            
            .tab-btn {
                padding: 10px 15px;
            }
            
            .clothes-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .order-history-details {
                flex-direction: column;
            }
            
            .order-history-img {
                width: 100%;
                height: 120px;
            }

            .wallet-actions {
                flex-direction: column;
            }
        }
    </style>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- LOGIN OVERLAY -->
    <div id="loginOverlay" class="login-overlay" style="display:none;">
        <div class="login-box">
            <div class="login-brand">Laundromat Pro</div>
            <div class="login-title">Sign In</div>
            <form class="login-form" id="loginForm" autocomplete="off">
                <div>
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" placeholder="Enter username" required autofocus>
                </div>
                <div>
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
                <div class="login-error" id="loginError"></div>
            </form>
        </div>
    </div>

    <header>
        <div class="logo">
            <i class="fas fa-tshirt"></i>
            <span>Laundromat Pro</span>
        </div>
        <div class="welcome">Welcome, Attendant</div>
        <div class="header-controls">
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
            <button class="menu-btn" id="menuBtn">☰</button>
        </div>
    </header>
    
    <nav id="navMenu" class="nav-menu">
        <ul>
            <li id="aboutBtn"><i class="fas fa-info-circle"></i> About</li>
            <li id="termsBtn"><i class="fas fa-file-contract"></i> Terms & Conditions</li>
            <li id="privacyBtn"><i class="fas fa-shield-alt"></i> Privacy Policy</li>
            <li id="attendanceDatesBtn"><i class="fas fa-calendar-alt"></i> Attendance</li>
            <li id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Log Out</li>
        </ul>
    </nav>

    <main>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search orders by customer name or ID...">
            <button id="searchBtn"><i class="fas fa-search"></i></button>
        </div>

        <div class="attendance-options">
            <button class="attendance-btn in" id="checkInBtn">
                <i class="fas fa-sign-in-alt"></i> Check In
            </button>
            <button class="attendance-btn out" id="checkOutBtn" disabled>
                <i class="fas fa-sign-out-alt"></i> Check Out
            </button>
        </div>
        
        <div class="tabs">
            <button class="tab-btn active" data-tab="pending">Pending</button>
            <button class="tab-btn" data-tab="activeWash">Washing</button>
            <button class="tab-btn" data-tab="pendingDryer">Pending Dryer</button>
            <button class="tab-btn" data-tab="activeDry">Drying</button>
            <button class="tab-btn" data-tab="done">Completed</button>
            <button class="tab-btn" data-tab="rejected">Rejected</button>
        </div>
        
        <!-- Pending Tab -->
        <div class="tab-content active" id="pendingTab">
            <div class="clothes-section pending">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h2>Pending Orders</h2>
                </div>
                <div class="clothes-grid" id="pendingGrid">
                    <!-- Pending clothes will be added here -->
                </div>
            </div>
        </div>
        
        <!-- Active Wash Tab -->
        <div class="tab-content" id="activeWashTab">
            <div class="clothes-section active-wash">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-soap"></i>
                    </div>
                    <h2>Washing In Progress</h2>
                </div>
                <div class="clothes-grid" id="activeWashGrid">
                    <!-- Active wash clothes will be added here -->
                </div>
            </div>
        </div>
        
        <!-- Pending Dryer Tab -->
        <div class="tab-content" id="pendingDryerTab">
            <div class="clothes-section pending-dryer">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-hourglass-half"></i>
                    </div>
                    <h2>Ready for Drying</h2>
                </div>
                <div class="clothes-grid" id="pendingDryerGrid">
                    <!-- Pending dryer clothes will be added here -->
                </div>
            </div>
        </div>
        
        <!-- Active Dry Tab -->
        <div class="tab-content" id="activeDryTab">
            <div class="clothes-section active-dry">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-wind"></i>
                    </div>
                    <h2>Drying In Progress</h2>
                </div>
                <div class="clothes-grid" id="activeDryGrid">
                    <!-- Active dry clothes will be added here -->
                </div>
            </div>
        </div>
        
        <!-- Done Tab -->
        <div class="tab-content" id="doneTab">
            <div class="clothes-section done">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>Completed Orders</h2>
                </div>
                <div class="clothes-grid" id="doneGrid">
                    <!-- Completed clothes will be added here -->
                </div>
            </div>
        </div>
        
        <!-- Rejected Tab -->
        <div class="tab-content" id="rejectedTab">
            <div class="clothes-section rejected">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-times-circle"></i>
                    </div>
                    <h2>Rejected Orders</h2>
                </div>
                <div class="clothes-grid" id="rejectedGrid">
                    <!-- Rejected clothes will be added here -->
                </div>
            </div>
        </div>
    </main>

    <!-- QA Reject Modal -->
    <div id="qaRejectModal" class="qa-modal">
        <div class="qa-modal-content">
            <div class="qa-modal-header">
                <h2>QA Rejection Feedback</h2>
                <button class="close-btn" id="closeQaRejectModal">&times;</button>
            </div>
            <div class="qa-modal-body">
                <form id="qaRejectForm">
                    <div class="qa-form-group">
                        <label for="rejectReason">Reason for rejection:</label>
                        <textarea id="rejectReason" required></textarea>
                    </div>
                </form>
            </div>
            <div class="qa-modal-footer">
                <button class="qa-submit-btn cancel" id="cancelQaReject">Cancel</button>
                <button class="qa-submit-btn submit" id="submitQaReject">Submit</button>
            </div>
        </div>
    </div>

    <footer>
        <button class="footer-btn active" id="homeBtn">
            <i class="fas fa-home"></i>
            <span>Dashboard</span>
        </button>
        <button class="footer-btn" id="qrBtn">
            <i class="fas fa-qrcode"></i>
            <span>Scan QR</span>
        </button>
        <button class="footer-btn" id="profileBtn">
            <i class="fas fa-user"></i>
            <span>Profile</span>
        </button>
    </footer>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Profile Options</h2>
                <button class="close-btn" id="closeProfileModal">&times;</button>
            </div>
            <ul class="profile-options">
                <li class="profile-option" id="yourProfileBtn">
                    <i class="fas fa-user-circle"></i>
                    <span>Your Profile</span>
                </li>
                <li class="profile-option" id="attendanceBtn">
                    <i class="fas fa-calendar-check"></i>
                    <span>Attendance Records</span>
                </li>
                <li class="profile-option" id="changePasswordBtn">
                    <i class="fas fa-key"></i>
                    <span>Change Password</span>
                </li>
                <li class="profile-option" id="walletBtn">
                    <i class="fas fa-wallet"></i>
                    <span>Wallet</span>
                </li>
                <li class="profile-option" id="orderHistoryBtn">
                    <i class="fas fa-history"></i>
                    <span>Order History</span>
                </li>
                <li class="profile-option" id="profileLogoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Log Out</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Your Profile Modal -->
    <div id="yourProfileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Profile</h2>
                <button class="close-btn" id="closeYourProfileModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-info">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profile Picture">
                    <h3>Sahil Dhiman</h3>
                    <p><strong>Attendant ID:</strong> ATT12321</p>
                    <p><strong>Email:</strong> sahildhiman034@gmail.com</p>
                    <p><strong>Phone:</strong> 8352929751</p>
                    <p><strong>Joined:</strong> January 15, 2023</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Change Password</h2>
                <button class="close-btn" id="closeChangePasswordModal">&times;</button>
            </div>
            <div class="modal-body">
                <form class="password-form" id="passwordForm">
                    <div class="form-group">
                        <label for="currentPassword">Current Password</label>
                        <input type="password" id="currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <button type="submit" class="submit-btn">Update Password</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Wallet Modal -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Wallet</h2>
                <button class="close-btn" id="closeWalletModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="wallet-balance">
                    <h3>Your Balance</h3>
                    <div class="wallet-amount" id="walletBalance">₹1,250.00</div>
                    <p>Available for withdrawal</p>
                </div>
                
                <div class="wallet-actions">
                    <button class="wallet-action-btn add-money" id="addMoneyBtn">
                        <i class="fas fa-plus-circle"></i> Add Money
                    </button>
                    <button class="wallet-action-btn withdraw" id="withdrawMoneyBtn">
                        <i class="fas fa-minus-circle"></i> Withdraw
                    </button>
                </div>
                
                <div class="wallet-transactions">
                    <h3>Recent Transactions</h3>
                    <div id="walletTransactions">
                        <!-- Transactions will be added here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Money Modal -->
    <div id="addMoneyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Money to Wallet</h2>
                <button class="close-btn" id="closeAddMoneyModal">&times;</button>
            </div>
            <div class="modal-body">
                <form class="money-form" id="addMoneyForm">
                    <div class="form-group">
                        <label for="addAmount">Amount (₹)</label>
                        <input type="number" id="addAmount" min="100" max="10000" required>
                    </div>
                    <div class="form-group">
                        <label for="paymentMethod">Payment Method</label>
                        <select id="paymentMethod" class="form-group input" required>
                            <option value="">Select payment method</option>
                            <option value="upi">UPI</option>
                            <option value="card">Credit/Debit Card</option>
                            <option value="netbanking">Net Banking</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Add Money</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Withdraw Money Modal -->
    <div id="withdrawMoneyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Withdraw Money</h2>
                <button class="close-btn" id="closeWithdrawMoneyModal">&times;</button>
            </div>
            <div class="modal-body">
                <form class="money-form" id="withdrawMoneyForm">
                    <div class="form-group">
                        <label for="withdrawAmount">Amount (₹)</label>
                        <input type="number" id="withdrawAmount" min="100" required>
                    </div>
                    <div class="form-group">
                        <label for="bankAccount">Bank Account</label>
                        <select id="bankAccount" class="form-group input" required>
                            <option value="">Select bank account</option>
                            <option value="hdfc">HDFC Bank ****4532</option>
                            <option value="sbi">SBI Bank ****7890</option>
                        </select>
                    </div>
                    <button type="submit" class="submit-btn">Withdraw</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Order History Modal -->
    <div id="orderHistoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Order History</h2>
                <button class="close-btn" id="closeOrderHistoryModal">&times;</button>
            </div>
            <div class="modal-body" id="orderHistoryContainer">
                <!-- Order history items will be added here -->
            </div>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Order Details</h2>
                <button class="close-btn" id="closeOrderDetailsModal">&times;</button>
            </div>
            <div class="modal-body" id="orderDetailsContainer">
                <!-- Order details will be added here -->
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About Laundromat Pro</h2>
                <button class="close-btn" id="closeAboutModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Laundromat Pro is a professional laundry management system designed to streamline operations for attendants and provide excellent service to customers.</p>
                <p>Our system features:</p>
                <ul>
                    <li>Real-time order tracking</li>
                    <li>Automated status updates</li>
                    <li>QR code scanning for machine assignment</li>
                    <li>Comprehensive reporting</li>
                    <li>Integrated payment system</li>
                </ul>
                <p><strong>Version:</strong> 2.0.0</p>
                <p><strong>Developed by:</strong> Laundromat Solutions Inc.</p>
            </div>
        </div>
    </div>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Terms & Conditions</h2>
                <button class="close-btn" id="closeTermsModal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Terms and Conditions for Laundromat Pro</h3>
                <p><strong>Effective Date:</strong> <span id="currentDate"></span></p>
                
                <h4>1. Definitions</h4>
                <p><strong>Attendant:</strong> The laundry professional responsible for processing orders and maintaining quality standards.</p>
                <p><strong>QR Code:</strong> Unique identifier for each washing machine to ensure proper order tracking.</p>
                
                <h4>2. Responsibilities</h4>
                <p>Attendants must accurately scan QR codes before processing each order.</p>
                <p>All orders must be processed according to the specified instructions.</p>
                
                <h4>3. Quality Assurance</h4>
                <p>Each completed order must pass quality inspection before being marked as done.</p>
                <p>Rejected orders must include detailed feedback for customers.</p>
                
                <h4>4. Payments</h4>
                <p>Attendants receive payments for completed orders through the wallet system.</p>
                <p>Withdrawals are processed within 1-3 business days.</p>
            </div>
        </div>
    </div>

    <!-- Privacy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Privacy Policy</h2>
                <button class="close-btn" id="closePrivacyModal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>Privacy Policy for Laundromat Pro</h3>
                <p><strong>Effective Date:</strong> <span id="privacyDate"></span></p>
                
                <h4>1. Information Collection</h4>
                <p>We collect necessary information for order processing and payment.</p>
                
                <h4>2. Data Usage</h4>
                <p>Information is used solely for service provision and quality improvement.</p>
                
                <h4>3. Security</h4>
                <p>We implement industry-standard security measures to protect your data.</p>
                
                <h4>4. Changes</h4>
                <p>Policy updates will be communicated through the application.</p>
            </div>
        </div>
    </div>

    <!-- Attendance Dates Modal -->
    <div id="attendanceDatesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Attendance Records</h2>
                <button class="close-btn" id="closeAttendanceModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="attendanceRecords">
                    <p>Loading your attendance records...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio elements for sounds -->
    <audio id="sirenSound" src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" preload="auto"></audio>
    <audio id="washingCompleteSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-retro-game-notification-270.wav" preload="auto"></audio>
    <audio id="dryingCompleteSound" src="https://assets.mixkit.co/sfx/preview/mixkit-notification-bell-600.wav" preload="auto"></audio>

    <script>
        // DOM Elements
        const menuBtn = document.getElementById('menuBtn');
        const navMenu = document.getElementById('navMenu');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const themeToggle = document.getElementById('themeToggle');
        
        // Search elements
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        
        // Attendance buttons
        const checkInBtn = document.getElementById('checkInBtn');
        const checkOutBtn = document.getElementById('checkOutBtn');
        
        // Footer buttons
        const homeBtn = document.getElementById('homeBtn');
        const qrBtn = document.getElementById('qrBtn');
        const profileBtn = document.getElementById('profileBtn');
        
        // Menu buttons
        const aboutBtn = document.getElementById('aboutBtn');
        const termsBtn = document.getElementById('termsBtn');
        const privacyBtn = document.getElementById('privacyBtn');
        const attendanceDatesBtn = document.getElementById('attendanceDatesBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Modals
        const profileModal = document.getElementById('profileModal');
        const yourProfileModal = document.getElementById('yourProfileModal');
        const changePasswordModal = document.getElementById('changePasswordModal');
        const walletModal = document.getElementById('walletModal');
        const addMoneyModal = document.getElementById('addMoneyModal');
        const withdrawMoneyModal = document.getElementById('withdrawMoneyModal');
        const aboutModal = document.getElementById('aboutModal');
        const termsModal = document.getElementById('termsModal');
        const privacyModal = document.getElementById('privacyModal');
        const attendanceDatesModal = document.getElementById('attendanceDatesModal');
        const qaRejectModal = document.getElementById('qaRejectModal');
        const orderHistoryModal = document.getElementById('orderHistoryModal');
        const orderDetailsModal = document.getElementById('orderDetailsModal');
        
        // Close buttons
        const closeProfileModal = document.getElementById('closeProfileModal');
        const closeYourProfileModal = document.getElementById('closeYourProfileModal');
        const closeChangePasswordModal = document.getElementById('closeChangePasswordModal');
        const closeWalletModal = document.getElementById('closeWalletModal');
        const closeAddMoneyModal = document.getElementById('closeAddMoneyModal');
        const closeWithdrawMoneyModal = document.getElementById('closeWithdrawMoneyModal');
        const closeAboutModal = document.getElementById('closeAboutModal');
        const closeTermsModal = document.getElementById('closeTermsModal');
        const closePrivacyModal = document.getElementById('closePrivacyModal');
        const closeAttendanceModal = document.getElementById('closeAttendanceModal');
        const closeQaRejectModal = document.getElementById('closeQaRejectModal');
        const closeOrderHistoryModal = document.getElementById('closeOrderHistoryModal');
        const closeOrderDetailsModal = document.getElementById('closeOrderDetailsModal');
        
        // QA Reject Modal
        const qaRejectForm = document.getElementById('qaRejectForm');
        const cancelQaReject = document.getElementById('cancelQaReject');
        const submitQaReject = document.getElementById('submitQaReject');
        
        // Wallet buttons
        const addMoneyBtn = document.getElementById('addMoneyBtn');
        const withdrawMoneyBtn = document.getElementById('withdrawMoneyBtn');
        
        // Wallet forms
        const addMoneyForm = document.getElementById('addMoneyForm');
        const withdrawMoneyForm = document.getElementById('withdrawMoneyForm');
        
        // Profile options
        const yourProfileBtn = document.getElementById('yourProfileBtn');
        const attendanceBtn = document.getElementById('attendanceBtn');
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        const walletBtn = document.getElementById('walletBtn');
        const orderHistoryBtn = document.getElementById('orderHistoryBtn');
        const profileLogoutBtn = document.getElementById('profileLogoutBtn');
        
        // Password form
        const passwordForm = document.getElementById('passwordForm');
        
        // Audio elements
        const sirenSound = document.getElementById('sirenSound');
        const washingCompleteSound = document.getElementById('washingCompleteSound');
        const dryingCompleteSound = document.getElementById('dryingCompleteSound');
        
        // Login elements
        const loginOverlay = document.getElementById('loginOverlay');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        const loginUsername = document.getElementById('loginUsername');
        const loginPassword = document.getElementById('loginPassword');
        
        // Track attendance status
        let isCheckedIn = false;
        let attendanceHistory = [];
        
        // Track QA rejection
        let currentRejectClothesId = null;
        
        // Order history
        let orderHistory = [];
        
        // Wallet data
        let walletBalance = 1250.00;
        let walletTransactions = [
            {
                id: 1,
                type: 'credit',
                amount: 500.00,
                date: new Date(Date.now() - 86400000 * 2),
                description: 'Payment for order #1234'
            },
            {
                id: 2,
                type: 'credit',
                amount: 750.00,
                date: new Date(Date.now() - 86400000),
                description: 'Payment for order #5678'
            },
            {
                id: 3,
                type: 'debit',
                amount: 100.00,
                date: new Date(),
                description: 'Withdrawal to bank account'
            }
        ];
        
        // Sample clothes data with history tracking
        let clothesData = [
            {
                id: 1234,
                image: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                customer: "Customer #1234",
                items: "2 shirts, 1 jeans",
                due: "Today 5 PM",
                status: "pending",
                washTimer: null,
                dryTimer: null,
                washRemaining: 0,
                dryRemaining: 0,
                qaFeedback: "",
                history: [
                    { event: "Order received", time: new Date(Date.now() - 3600000) }
                ]
            },
            {
                id: 3456,
                image: "https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                customer: "Customer #3456",
                items: "3 blouses, 1 skirt",
                due: "Tomorrow 2 PM",
                status: "pending",
                washTimer: null,
                dryTimer: null,
                washRemaining: 0,
                dryRemaining: 0,
                qaFeedback: "",
                history: [
                    { event: "Order received", time: new Date(Date.now() - 10800000) }
                ]
            },
            {
                id: 5678,
                image: "https://images.unsplash.com/photo-1556905055-8f358a7a47b2?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                customer: "Customer #5678",
                items: "1 dress, 3 shirts",
                due: "Tomorrow 10 AM",
                status: "pending",
                washTimer: null,
                dryTimer: null,
                washRemaining: 0,
                dryRemaining: 0,
                qaFeedback: "",
                history: [
                    { event: "Order received", time: new Date(Date.now() - 7200000) }
                ]
            },
            {
                id: 9012,
                image: "https://images.unsplash.com/photo-1525507119028-ed4c629a60a3?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                customer: "Customer #9012",
                items: "5 shirts, 2 pants",
                due: "Today 7 PM",
                status: "pending",
                washTimer: null,
                dryTimer: null,
                washRemaining: 0,
                dryRemaining: 0,
                qaFeedback: "",
                history: [
                    { event: "Order received", time: new Date(Date.now() - 5400000) }
                ]
            }
        ];

        // LOGIN ENFORCEMENT FUNCTIONS
        function showLoginOverlay() {
            loginOverlay.style.display = 'flex';
            setTimeout(() => { loginUsername.focus(); }, 100);
        }
        
        function hideLoginOverlay() {
            loginOverlay.style.display = 'none';
        }
        
        function isLoggedIn() {
            return localStorage.getItem('laundromat_logged_in') === 'true';
        }
        
        function setLoggedIn(val) {
            if (val) {
                localStorage.setItem('laundromat_logged_in', 'true');
            } else {
                localStorage.removeItem('laundromat_logged_in');
            }
        }
        
        function enforceLogin() {
            if (!isLoggedIn()) {
                showLoginOverlay();
                document.body.style.overflow = 'hidden';
            } else {
                hideLoginOverlay();
                document.body.style.overflow = '';
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date in terms and privacy modals
            const currentDate = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('currentDate').textContent = currentDate;
            document.getElementById('privacyDate').textContent = currentDate;
            
            // Check if already checked in from localStorage
            if (localStorage.getItem('lastCheckIn')) {
                isCheckedIn = true;
                updateAttendanceButtons(true);
            }
            
            // Load attendance history
            loadAttendanceHistory();
            
            // Load clothes data
            renderClothes();
            
            // Load order history from localStorage
            const savedHistory = localStorage.getItem('orderHistory');
            if (savedHistory) {
                orderHistory = JSON.parse(savedHistory, (key, value) => {
                    if ((key === 'time' || key === 'completionTime') && value) {
                        return new Date(value);
                    }
                    return value;
                });
            } else {
                // Add some sample completed orders to history
                orderHistory = [
                    {
                        id: 7890,
                        image: "https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                        customer: "Customer #7890",
                        items: "4 t-shirts, 2 shorts",
                        due: "Yesterday 3 PM",
                        status: "completed",
                        completionTime: new Date(Date.now() - 86400000),
                        history: [
                            { event: "Order received", time: new Date(Date.now() - 172800000) },
                            { event: "Washing started", time: new Date(Date.now() - 172700000) },
                            { event: "Washing completed", time: new Date(Date.now() - 172600000) },
                            { event: "Drying started", time: new Date(Date.now() - 172500000) },
                            { event: "Drying completed", time: new Date(Date.now() - 172400000) },
                            { event: "Order approved by QA", time: new Date(Date.now() - 172300000) }
                        ]
                    },
                    {
                        id: 4567,
                        image: "https://images.unsplash.com/photo-1551232864-3f0890e580d9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                        customer: "Customer #4567",
                        items: "1 jacket, 3 sweaters",
                        due: "Yesterday 6 PM",
                        status: "completed",
                        completionTime: new Date(Date.now() - 86400000),
                        history: [
                            { event: "Order received", time: new Date(Date.now() - 172800000) },
                            { event: "Washing started", time: new Date(Date.now() - 172700000) },
                            { event: "Washing completed", time: new Date(Date.now() - 172600000) },
                            { event: "Drying started", time: new Date(Date.now() - 172500000) },
                            { event: "Drying completed", time: new Date(Date.now() - 172400000) },
                            { event: "Order approved by QA", time: new Date(Date.now() - 172300000) }
                        ]
                    }
                ];
                localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
            }
            
            // Load wallet data from localStorage
            const savedWallet = localStorage.getItem('walletData');
            if (savedWallet) {
                const walletData = JSON.parse(savedWallet, (key, value) => {
                    if (key === 'date' && value) {
                        return new Date(value);
                    }
                    return value;
                });
                walletBalance = walletData.balance;
                walletTransactions = walletData.transactions;
            }
            
            // Check for dark mode preference
            if (localStorage.getItem('darkMode') === 'enabled') {
                document.body.classList.add('dark-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Enforce login
            enforceLogin();
            
            // Set up event listeners
            setupEventListeners();
        });

        function renderClothes() {
            const pendingGrid = document.getElementById('pendingGrid');
            const activeWashGrid = document.getElementById('activeWashGrid');
            const pendingDryerGrid = document.getElementById('pendingDryerGrid');
            const activeDryGrid = document.getElementById('activeDryGrid');
            const doneGrid = document.getElementById('doneGrid');
            const rejectedGrid = document.getElementById('rejectedGrid');
            
            // Clear all grids
            pendingGrid.innerHTML = '';
            activeWashGrid.innerHTML = '';
            pendingDryerGrid.innerHTML = '';
            activeDryGrid.innerHTML = '';
            doneGrid.innerHTML = '';
            rejectedGrid.innerHTML = '';
            
            // Render clothes in appropriate sections
            clothesData.forEach(clothes => {
                const clothesCard = createClothesCard(clothes);
                
                switch(clothes.status) {
                    case 'pending':
                        pendingGrid.appendChild(clothesCard);
                        break;
                    case 'washing':
                        activeWashGrid.appendChild(clothesCard);
                        break;
                    case 'pendingDryer':
                        pendingDryerGrid.appendChild(clothesCard);
                        break;
                    case 'drying':
                        activeDryGrid.appendChild(clothesCard);
                        break;
                    case 'done':
                        doneGrid.appendChild(clothesCard);
                        break;
                    case 'rejected':
                        rejectedGrid.appendChild(clothesCard);
                        break;
                }
            });

            // Show empty state if no items in a section
            checkEmptyState(pendingGrid, 'pending');
            checkEmptyState(activeWashGrid, 'washing');
            checkEmptyState(pendingDryerGrid, 'pendingDryer');
            checkEmptyState(activeDryGrid, 'drying');
            checkEmptyState(doneGrid, 'done');
            checkEmptyState(rejectedGrid, 'rejected');
        }

        function checkEmptyState(grid, status) {
            if (grid.children.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                
                let icon, message;
                switch(status) {
                    case 'pending':
                        icon = 'fas fa-clock';
                        message = 'No pending orders';
                        break;
                    case 'washing':
                        icon = 'fas fa-soap';
                        message = 'No orders being washed';
                        break;
                    case 'pendingDryer':
                        icon = 'fas fa-hourglass-half';
                        message = 'No orders ready for drying';
                        break;
                    case 'drying':
                        icon = 'fas fa-wind';
                        message = 'No orders being dried';
                        break;
                    case 'done':
                        icon = 'fas fa-check-circle';
                        message = 'No completed orders';
                        break;
                    case 'rejected':
                        icon = 'fas fa-times-circle';
                        message = 'No rejected orders';
                        break;
                }
                
                emptyState.innerHTML = `
                    <i class="${icon}"></i>
                    <p>${message}</p>
                `;
                grid.appendChild(emptyState);
            }
        }

        function createClothesCard(clothes) {
            const clothesCard = document.createElement('div');
            clothesCard.className = 'clothes-card';
            clothesCard.dataset.id = clothes.id;
            
            // Status badge
            let statusBadge = '';
            if (clothes.status === 'pending') {
                statusBadge = '<span class="status-badge pending-badge">Pending</span>';
            } else if (clothes.status === 'washing') {
                statusBadge = '<span class="status-badge washing-badge">Washing</span>';
            } else if (clothes.status === 'pendingDryer') {
                statusBadge = '<span class="status-badge pending-dryer-badge">Pending Dryer</span>';
            } else if (clothes.status === 'drying') {
                statusBadge = '<span class="status-badge drying-badge">Drying</span>';
            } else if (clothes.status === 'done') {
                statusBadge = '<span class="status-badge done-badge">Done</span>';
            } else if (clothes.status === 'rejected') {
                statusBadge = '<span class="status-badge rejected-badge">Rejected</span>';
            }
            
            let buttonsHTML = '';
            let timerHTML = '';
            
            if (clothes.status === 'pending') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn wash" data-id="${clothes.id}" id="washBtn-${clothes.id}">
                            <i class="fas fa-soap"></i> Wash
                        </button>
                    </div>
                `;
            } 
            else if (clothes.status === 'washing') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn" disabled>
                            <i class="fas fa-spinner fa-spin"></i> Washing
                        </button>
                    </div>
                    <div class="clothes-timer" id="timer-${clothes.id}"></div>
                `;
            }
            else if (clothes.status === 'pendingDryer') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn dry" data-id="${clothes.id}" id="dryBtn-${clothes.id}">
                            <i class="fas fa-wind"></i> Dry
                        </button>
                    </div>
                `;
            }
            else if (clothes.status === 'drying') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn" disabled>
                            <i class="fas fa-spinner fa-spin"></i> Drying
                        </button>
                    </div>
                    <div class="clothes-timer" id="timer-${clothes.id}"></div>
                `;
            }
            else if (clothes.status === 'done') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn approve" data-id="${clothes.id}" id="approveBtn-${clothes.id}">
                            <i class="fas fa-check"></i> Approve
                        </button>
                        <button class="clothes-btn reject" data-id="${clothes.id}" id="rejectBtn-${clothes.id}">
                            <i class="fas fa-times"></i> Reject
                        </button>
                    </div>
                `;
            }
            else if (clothes.status === 'rejected') {
                buttonsHTML = `
                    <div class="clothes-actions">
                        <button class="clothes-btn reprocess" data-id="${clothes.id}" id="reprocessBtn-${clothes.id}">
                            <i class="fas fa-redo"></i> Reprocess
                        </button>
                    </div>
                    ${clothes.qaFeedback ? `<p class="clothes-timer">Feedback: ${clothes.qaFeedback}</p>` : ''}
                `;
            }
            
            clothesCard.innerHTML = `
                ${statusBadge}
                <img src="${clothes.image}" alt="Clothes" class="clothes-img">
                <div class="clothes-info">
                    <h3>${clothes.customer}</h3>
                    <p>${clothes.items}</p>
                    <p>Due: ${clothes.due}</p>
                    ${buttonsHTML}
                    ${timerHTML}
                </div>
            `;
            
            return clothesCard;
        }

        function setupEventListeners() {
            // Menu toggle
            menuBtn.addEventListener('click', toggleMenu);
            
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Tab switching
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.dataset.tab;
                    switchTab(tabId);
                });
            });
            
            // Search functionality
            searchBtn.addEventListener('click', searchOrders);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchOrders();
                }
            });
            
            // Attendance buttons
            checkInBtn.addEventListener('click', attendantIn);
            checkOutBtn.addEventListener('click', attendantOut);
            
            // Footer buttons
            homeBtn.addEventListener('click', goHome);
            qrBtn.addEventListener('click', openQRCodeScanner);
            profileBtn.addEventListener('click', openProfile);
            
            // Menu buttons
            aboutBtn.addEventListener('click', showAbout);
            termsBtn.addEventListener('click', showTerms);
            privacyBtn.addEventListener('click', showPrivacy);
            attendanceDatesBtn.addEventListener('click', showAttendanceDates);
            logoutBtn.addEventListener('click', logout);
            
            // Close buttons
            closeProfileModal.addEventListener('click', closeAllModals);
            closeYourProfileModal.addEventListener('click', closeAllModals);
            closeChangePasswordModal.addEventListener('click', closeAllModals);
            closeWalletModal.addEventListener('click', closeAllModals);
            closeAddMoneyModal.addEventListener('click', closeAllModals);
            closeWithdrawMoneyModal.addEventListener('click', closeAllModals);
            closeAboutModal.addEventListener('click', closeAllModals);
            closeTermsModal.addEventListener('click', closeAllModals);
            closePrivacyModal.addEventListener('click', closeAllModals);
            closeAttendanceModal.addEventListener('click', closeAllModals);
            closeQaRejectModal.addEventListener('click', () => {
                qaRejectModal.style.display = 'none';
            });
            closeOrderHistoryModal.addEventListener('click', closeAllModals);
            closeOrderDetailsModal.addEventListener('click', closeAllModals);
            
            // QA Reject Modal
            cancelQaReject.addEventListener('click', () => {
                qaRejectModal.style.display = 'none';
                qaRejectForm.reset();
            });
            
            submitQaReject.addEventListener('click', () => {
                const rejectReason = document.getElementById('rejectReason').value;
                if (!rejectReason) {
                    alert("Please provide a reason for rejection");
                    return;
                }
                
                rejectClothes(currentRejectClothesId, rejectReason);
                qaRejectModal.style.display = 'none';
                qaRejectForm.reset();
            });
            
            // Wallet buttons
            addMoneyBtn.addEventListener('click', () => {
                walletModal.style.display = 'none';
                addMoneyModal.style.display = 'flex';
            });
            
            withdrawMoneyBtn.addEventListener('click', () => {
                walletModal.style.display = 'none';
                withdrawMoneyModal.style.display = 'flex';
            });
            
            // Wallet forms
            addMoneyForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const amount = parseFloat(document.getElementById('addAmount').value);
                const method = document.getElementById('paymentMethod').value;
                
                if (!amount || amount < 100) {
                    alert("Minimum amount to add is ₹100");
                    return;
                }
                
                if (!method) {
                    alert("Please select a payment method");
                    return;
                }
                
                // In a real app, this would process payment
                walletBalance += amount;
                walletTransactions.unshift({
                    id: walletTransactions.length + 1,
                    type: 'credit',
                    amount: amount,
                    date: new Date(),
                    description: `Added via ${method}`
                });
                
                localStorage.setItem('walletData', JSON.stringify({
                    balance: walletBalance,
                    transactions: walletTransactions
                }));
                
                alert(`₹${amount.toFixed(2)} added to your wallet successfully!`);
                closeAllModals();
                this.reset();
            });
            
            withdrawMoneyForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const amount = parseFloat(document.getElementById('withdrawAmount').value);
                const account = document.getElementById('bankAccount').value;
                
                if (!amount || amount < 100) {
                    alert("Minimum withdrawal amount is ₹100");
                    return;
                }
                
                if (amount > walletBalance) {
                    alert("Insufficient balance for this withdrawal");
                    return;
                }
                
                if (!account) {
                    alert("Please select a bank account");
                    return;
                }
                
                // In a real app, this would process withdrawal
                walletBalance -= amount;
                walletTransactions.unshift({
                    id: walletTransactions.length + 1,
                    type: 'debit',
                    amount: amount,
                    date: new Date(),
                    description: `Withdrawal to ${account}`
                });
                
                localStorage.setItem('walletData', JSON.stringify({
                    balance: walletBalance,
                    transactions: walletTransactions
                }));
                
                alert(`Withdrawal request for ₹${amount.toFixed(2)} submitted successfully! It will be processed in 1-3 business days.`);
                closeAllModals();
                this.reset();
            });
            
            // Profile options
            yourProfileBtn.addEventListener('click', viewProfile);
            attendanceBtn.addEventListener('click', viewAttendance);
            changePasswordBtn.addEventListener('click', changePassword);
            walletBtn.addEventListener('click', viewWallet);
            orderHistoryBtn.addEventListener('click', viewOrderHistory);
            profileLogoutBtn.addEventListener('click', logout);
            
            // Password form
            passwordForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (newPassword !== confirmPassword) {
                    alert("New passwords don't match!");
                    return;
                }
                
                // Here you would typically send to backend
                alert("Password changed successfully!");
                closeAllModals();
                this.reset();
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.matches('.menu-btn') && 
                    !event.target.closest('.nav-menu') && 
                    navMenu.style.display === 'block') {
                    navMenu.style.display = 'none';
                }
            });
            
            // Delegate wash, dry, approve, reject button events
            document.addEventListener('click', function(event) {
                if (event.target.closest('.clothes-btn.wash')) {
                    const clothesId = parseInt(event.target.closest('.clothes-btn').dataset.id);
                    startWashing(clothesId);
                }
                
                if (event.target.closest('.clothes-btn.dry')) {
                    const clothesId = parseInt(event.target.closest('.clothes-btn').dataset.id);
                    startDrying(clothesId);
                }
                
                if (event.target.closest('.clothes-btn.approve')) {
                    const clothesId = parseInt(event.target.closest('.clothes-btn').dataset.id);
                    approveClothes(clothesId);
                }
                
                if (event.target.closest('.clothes-btn.reject')) {
                    const clothesId = parseInt(event.target.closest('.clothes-btn').dataset.id);
                    openQaRejectModal(clothesId);
                }
                
                if (event.target.closest('.clothes-btn.reprocess')) {
                    const clothesId = parseInt(event.target.closest('.clothes-btn').dataset.id);
                    reprocessClothes(clothesId);
                }
            });

            // Separate event listener for order history items
            document.addEventListener('click', function(event) {
                // Handle view details button clicks in order history
                if (event.target.closest('.view-details-btn')) {
                    const btn = event.target.closest('.view-details-btn');
                    const timeline = btn.closest('.order-history-item').querySelector('.order-history-timeline');
                    
                    // Toggle timeline visibility
                    if (timeline.style.display === 'block') {
                        timeline.style.display = 'none';
                        btn.textContent = 'View Details';
                    } else {
                        timeline.style.display = 'block';
                        btn.textContent = 'Hide Details';
                    }
                }
                
                // Handle order details modal opening
                if (event.target.closest('.order-details-btn')) {
                    const orderId = parseInt(event.target.closest('.order-details-btn').dataset.id);
                    showOrderDetails(orderId);
                }
            });
            
            // Login form submit
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const user = loginUsername.value.trim();
                const pass = loginPassword.value;
                if (user === 'Laundromat' && pass === '123456') {
                    setLoggedIn(true);
                    hideLoginOverlay();
                    loginError.textContent = '';
                    document.body.style.overflow = '';
                } else {
                    loginError.textContent = 'Invalid username or password.';
                }
            });
            
            // Prevent interaction with app when overlay is shown
            loginOverlay.addEventListener('click', function(e) {
                if (e.target === loginOverlay) {
                    loginUsername.focus();
                }
            });
        }

        function searchOrders() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            if (!searchTerm) {
                renderClothes();
                return;
            }
            
            const filteredClothes = clothesData.filter(clothes => 
                clothes.customer.toLowerCase().includes(searchTerm) || 
                clothes.id.toString().includes(searchTerm)
            );
            
            // Clear all grids
            document.getElementById('pendingGrid').innerHTML = '';
            document.getElementById('activeWashGrid').innerHTML = '';
            document.getElementById('pendingDryerGrid').innerHTML = '';
            document.getElementById('activeDryGrid').innerHTML = '';
            document.getElementById('doneGrid').innerHTML = '';
            document.getElementById('rejectedGrid').innerHTML = '';
            
            if (filteredClothes.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-search"></i>
                    <p>No orders found matching "${searchTerm}"</p>
                `;
                document.getElementById('pendingGrid').appendChild(emptyState);
                return;
            }
            
            // Render filtered clothes in their respective sections
            filteredClothes.forEach(clothes => {
                const clothesCard = createClothesCard(clothes);
                
                switch(clothes.status) {
                    case 'pending':
                        document.getElementById('pendingGrid').appendChild(clothesCard);
                        break;
                    case 'washing':
                        document.getElementById('activeWashGrid').appendChild(clothesCard);
                        break;
                    case 'pendingDryer':
                        document.getElementById('pendingDryerGrid').appendChild(clothesCard);
                        break;
                    case 'drying':
                        document.getElementById('activeDryGrid').appendChild(clothesCard);
                        break;
                    case 'done':
                        document.getElementById('doneGrid').appendChild(clothesCard);
                        break;
                    case 'rejected':
                        document.getElementById('rejectedGrid').appendChild(clothesCard);
                        break;
                }
            });
        }

        // Toggle between dark and light mode
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('darkMode', 'disabled');
            }
        }

        // Switch between tabs
        function switchTab(tabId) {
            // Update tab buttons
            tabButtons.forEach(button => {
                button.classList.toggle('active', button.dataset.tab === tabId);
            });
            
            // Update tab contents
            tabContents.forEach(content => {
                content.classList.toggle('active', content.id === `${tabId}Tab`);
            });
        }

        // Toggle menu visibility
        function toggleMenu() {
            navMenu.style.display = navMenu.style.display === 'block' ? 'none' : 'block';
        }

        // Handle attendant check-in
        function attendantIn() {
            if (isCheckedIn) {
                alert("You're already checked in!");
                return;
            }
            
            // Get current time
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            // Update UI and state
            updateAttendanceButtons(true);
            
            // Store check-in time
            localStorage.setItem('lastCheckIn', now.toISOString());
            isCheckedIn = true;
            
            // Add to attendance history
            attendanceHistory.unshift({
                type: 'check-in',
                time: now,
                displayTime: `${now.toLocaleDateString()} ${timeString}`
            });
            localStorage.setItem('attendanceHistory', JSON.stringify(attendanceHistory));
            
            // Show confirmation
            alert(`You've successfully checked in at ${timeString}`);
        }

        // Handle attendant check-out
        function attendantOut() {
            if (!isCheckedIn) {
                alert("You need to check in first!");
                return;
            }
            
            // Get current time
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            // Calculate duration
            let durationMsg = '';
            const checkInTime = localStorage.getItem('lastCheckIn');
            if (checkInTime) {
                const checkInDate = new Date(checkInTime);
                const diffMs = now - checkInDate;
                const diffHrs = Math.floor(diffMs / (1000 * 60 * 60));
                const diffMins = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
                durationMsg = `\nDuration: ${diffHrs}h ${diffMins}m`;
            }
            
            // Update UI and state
            updateAttendanceButtons(false);
            
            // Clear check-in time
            localStorage.removeItem('lastCheckIn');
            isCheckedIn = false;
            
            // Add to attendance history
            attendanceHistory.unshift({
                type: 'check-out',
                time: now,
                displayTime: `${now.toLocaleDateString()} ${timeString}`
            });
            localStorage.setItem('attendanceHistory', JSON.stringify(attendanceHistory));
            
            // Show confirmation
            alert(`You've successfully checked out at ${timeString}${durationMsg}`);
        }

        // Update attendance buttons UI
        function updateAttendanceButtons(checkedIn) {
            if (checkedIn) {
                checkInBtn.innerHTML = '<i class="fas fa-check-circle"></i> Checked In';
                checkInBtn.style.backgroundColor = '#218838';
                checkOutBtn.disabled = false;
            } else {
                checkInBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> Check In';
                checkInBtn.style.backgroundColor = '#28a745';
                checkOutBtn.disabled = true;
            }
        }

        // Load attendance history from localStorage
        function loadAttendanceHistory() {
            const savedHistory = localStorage.getItem('attendanceHistory');
            if (savedHistory) {
                attendanceHistory = JSON.parse(savedHistory, (key, value) => {
                    if (key === 'time' && value) {
                        return new Date(value);
                    }
                    return value;
                });
            } else {
                // Sample data for demo
                const now = new Date();
                const yesterday = new Date(now);
                yesterday.setDate(yesterday.getDate() - 1);
                
                attendanceHistory = [
                    {
                        type: 'check-in',
                        time: now,
                        displayTime: `${now.toLocaleDateString()} ${now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`
                    },
                    {
                        type: 'check-out',
                        time: yesterday,
                        displayTime: `${yesterday.toLocaleDateString()} ${yesterday.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`
                    }
                ];
                localStorage.setItem('attendanceHistory', JSON.stringify(attendanceHistory));
            }
        }

        // Show attendance records
        function showAttendanceRecords() {
            const recordsContainer = document.getElementById('attendanceRecords');
            recordsContainer.innerHTML = '';
            
            if (attendanceHistory.length === 0) {
                recordsContainer.innerHTML = '<p>No attendance records found.</p>';
                return;
            }
            
            attendanceHistory.forEach(record => {
                const recordElement = document.createElement('div');
                recordElement.className = 'attendance-record';
                recordElement.innerHTML = `
                    <p><strong>${record.type === 'check-in' ? 'Checked In' : 'Checked Out'}</strong></p>
                    <p>${record.displayTime}</p>
                `;
                recordsContainer.appendChild(recordElement);
            });
        }

        // Start washing process (40 minutes)
        function startWashing(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            if (clothes.status !== 'pending') {
                alert("This item is already being processed!");
                return;
            }
            
            clothes.status = 'washing';
            clothes.washRemaining = 1 * 6; // 40 minutes in seconds
            
            // Add to history
            clothes.history.unshift({
                event: "Washing started",
                time: new Date()
            });
            
            // Start timer
            clothes.washTimer = setInterval(() => {
                clothes.washRemaining--;
                updateTimerDisplay(clothesId);
                
                if (clothes.washRemaining <= 0) {
                    clearInterval(clothes.washTimer);
                    clothes.washTimer = null;
                    washingComplete(clothesId);
                }
            }, 1000);
            
            // Update UI
            renderClothes();
            switchTab('activeWash');
            
            alert(`Washing started for ${clothes.customer}'s clothes (40 minutes).`);
        }

        // Start drying process (15 minutes)
        function startDrying(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            if (clothes.status !== 'pendingDryer') {
                alert("This item is not ready for drying!");
                return;
            }
            
            clothes.status = 'drying';
            clothes.dryRemaining = 1 * 6; // 15 minutes in seconds
            
            // Add to history
            clothes.history.unshift({
                event: "Drying started",
                time: new Date()
            });
            
            // Start timer
            clothes.dryTimer = setInterval(() => {
                clothes.dryRemaining--;
                updateTimerDisplay(clothesId);
                
                if (clothes.dryRemaining <= 0) {
                    clearInterval(clothes.dryTimer);
                    clothes.dryTimer = null;
                    dryingComplete(clothesId);
                }
            }, 1000);
            
            // Update UI
            renderClothes();
            switchTab('activeDry');
            
            alert(`Drying started for ${clothes.customer}'s clothes (15 minutes).`);
        }

        // Update the timer display for a specific clothes item
        function updateTimerDisplay(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            const timerElement = document.getElementById(`timer-${clothesId}`);
            if (!timerElement) return;
            
            if (clothes.status === 'washing') {
                const minutes = Math.floor(clothes.washRemaining / 60);
                const seconds = clothes.washRemaining % 60;
                timerElement.textContent = `Washing: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                timerElement.style.color = clothes.washRemaining < 60 ? '#dc3545' : '#333';
            } 
            else if (clothes.status === 'drying') {
                const minutes = Math.floor(clothes.dryRemaining / 60);
                const seconds = clothes.dryRemaining % 60;
                timerElement.textContent = `Drying: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                timerElement.style.color = clothes.dryRemaining < 60 ? '#dc3545' : '#333';
            }
        }

        // Washing complete handler
        function washingComplete(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            // Move to pending dryer
            clothes.status = 'pendingDryer';
            
            // Add to history
            clothes.history.unshift({
                event: "Washing completed",
                time: new Date()
            });
            
            // Update UI
            renderClothes();
            switchTab('pendingDryer');
            
            // Play washing complete sound
            playSound('washingCompleteSound', 3);
            
            alert(`Washing complete for ${clothes.customer}'s clothes. Ready for drying.`);
        }

        // Drying complete handler
        function dryingComplete(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            // Move to done
            clothes.status = 'done';
            
            // Add to history
            clothes.history.unshift({
                event: "Drying completed",
                time: new Date()
            });
            
            // Update UI
            renderClothes();
            switchTab('done');
            
            // Play drying complete sound (different sound)
            playSound('dryingCompleteSound', 3);
            
            alert(`Drying complete for ${clothes.customer}'s clothes. Ready for QA.`);
        }

        // Play sound for specified duration in seconds
        function playSound(soundId, durationSeconds) {
            const sound = document.getElementById(soundId);
            if (!sound) {
                console.error(`Sound element with ID ${soundId} not found`);
                return;
            }
            
            // Reset sound to beginning
            sound.currentTime = 0;
            
            // Play the sound
            sound.play().catch(error => {
                console.error(`Error playing sound ${soundId}:`, error);
            });
            
            // Stop after duration if specified
            if (durationSeconds) {
                setTimeout(() => {
                    sound.pause();
                }, durationSeconds * 1000);
            }
        }

        // Play siren sound for specified duration in seconds
        function playSirenSound(durationSeconds) {
            const sound = document.getElementById('sirenSound');
            if (!sound) {
                console.error("Siren sound element not found");
                return;
            }
            
            sound.currentTime = 0;
            sound.loop = true;
            
            sound.play().catch(error => {
                console.error("Error playing siren sound:", error);
            });
            
            // Stop after duration
            setTimeout(() => {
                sound.pause();
                sound.loop = false;
            }, durationSeconds * 1000);
        }

        // Approve clothes (QA Approved)
        function approveClothes(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            // Add to history
            clothes.history.unshift({
                event: "Order approved by QA",
                time: new Date()
            });
            
            // Add to order history
            orderHistory.unshift({
                ...clothes,
                status: "completed",
                completionTime: new Date()
            });
            localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
            
            // Add payment to wallet
            const paymentAmount = Math.floor(Math.random() * 500) + 100; // Random amount between 100-600
            walletBalance += paymentAmount;
            walletTransactions.unshift({
                id: walletTransactions.length + 1,
                type: 'credit',
                amount: paymentAmount,
                date: new Date(),
                description: `Payment for order #${clothesId}`
            });
            localStorage.setItem('walletData', JSON.stringify({
                balance: walletBalance,
                transactions: walletTransactions
            }));
            
            // Remove from active clothes
            clothesData = clothesData.filter(item => item.id !== clothesId);
            
            // Update UI
            renderClothes();
            
            alert(`Order #${clothesId} approved and payment of ₹${paymentAmount} added to your wallet.`);
        }

        // Open QA Reject modal
        function openQaRejectModal(clothesId) {
            currentRejectClothesId = clothesId;
            qaRejectModal.style.display = 'flex';
        }

        // Reject clothes (QA Rejected)
        function rejectClothes(clothesId, feedback) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            // Update clothes status and feedback
            clothes.status = 'rejected';
            clothes.qaFeedback = feedback;
            
            // Add to history
            clothes.history.unshift({
                event: "Order rejected by QA",
                time: new Date(),
                feedback: feedback
            });
            
            // Add to order history
            orderHistory.unshift({
                ...clothes,
                status: "rejected",
                completionTime: new Date()
            });
            localStorage.setItem('orderHistory', JSON.stringify(orderHistory));
            
            // Update UI
            renderClothes();
            switchTab('rejected');
            
            alert(`Order #${clothesId} rejected with feedback: ${feedback}`);
        }

        // Reprocess rejected clothes
        function reprocessClothes(clothesId) {
            const clothes = clothesData.find(item => item.id === clothesId);
            if (!clothes) return;
            
            // Reset status and clear feedback
            clothes.status = 'pending';
            clothes.qaFeedback = '';
            
            // Add to history
            clothes.history.unshift({
                event: "Order sent for reprocessing",
                time: new Date()
            });
            
            // Update UI
            renderClothes();
            switchTab('pending');
            
            alert(`Order #${clothesId} sent back for reprocessing.`);
        }

        // Footer navigation functions
        function goHome() {
            // Reset active tab to pending
            switchTab('pending');
            
            // Update footer button states
            document.querySelectorAll('.footer-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            homeBtn.classList.add('active');
        }

        function openQRCodeScanner() {
            // Update footer button states
            document.querySelectorAll('.footer-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            qrBtn.classList.add('active');
            
            alert("QR Code Scanner would open here in a real app");
        }

        function openProfile() {
            // Update footer button states
            document.querySelectorAll('.footer-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            profileBtn.classList.add('active');
            
            // Open profile modal
            profileModal.style.display = 'flex';
        }

        // Modal functions
        function viewProfile() {
            profileModal.style.display = 'none';
            yourProfileModal.style.display = 'flex';
        }

        function viewAttendance() {
            profileModal.style.display = 'none';
            showAttendanceRecords();
            attendanceDatesModal.style.display = 'flex';
        }

        function changePassword() {
            profileModal.style.display = 'none';
            changePasswordModal.style.display = 'flex';
        }

        function viewWallet() {
            profileModal.style.display = 'none';
            
            // Update wallet balance display
            document.getElementById('walletBalance').textContent = `₹${walletBalance.toFixed(2)}`;
            
            // Render transactions
            const transactionsContainer = document.getElementById('walletTransactions');
            transactionsContainer.innerHTML = '';
            
            if (walletTransactions.length === 0) {
                transactionsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-wallet"></i>
                        <p>No transactions yet</p>
                    </div>
                `;
            } else {
                walletTransactions.forEach(transaction => {
                    const transactionElement = document.createElement('div');
                    transactionElement.className = 'transaction-item';
                    
                    const timeString = transaction.date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    const dateString = transaction.date.toLocaleDateString();
                    
                    transactionElement.innerHTML = `
                        <div>
                            <div class="transaction-details">${transaction.description}</div>
                            <div class="transaction-date">${dateString} ${timeString}</div>
                        </div>
                        <div class="transaction-amount ${transaction.type}">
                            ${transaction.type === 'credit' ? '+' : '-'}₹${transaction.amount.toFixed(2)}
                        </div>
                    `;
                    
                    transactionsContainer.appendChild(transactionElement);
                });
            }
            
            walletModal.style.display = 'flex';
        }

        function viewOrderHistory() {
            profileModal.style.display = 'none';
            
            // Render order history
            const orderHistoryContainer = document.getElementById('orderHistoryContainer');
            orderHistoryContainer.innerHTML = '';
            
            if (orderHistory.length === 0) {
                orderHistoryContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <p>No order history found</p>
                    </div>
                `;
                orderHistoryModal.style.display = 'flex';
                return;
            }
            
            orderHistory.forEach(order => {
                const orderElement = document.createElement('div');
                orderElement.className = 'order-history-item';
                
                // Determine status class
                let statusClass = '';
                if (order.status === 'completed') {
                    statusClass = 'status-done';
                } else if (order.status === 'rejected') {
                    statusClass = 'status-rejected';
                } else if (order.status === 'washing') {
                    statusClass = 'status-washing';
                } else if (order.status === 'drying') {
                    statusClass = 'status-drying';
                } else if (order.status === 'pendingDryer') {
                    statusClass = 'status-pending-dryer';
                } else {
                    statusClass = 'status-pending';
                }
                
                // Format completion time
                let completionTime = '';
                if (order.completionTime) {
                    completionTime = new Date(order.completionTime).toLocaleString();
                }
                
                orderElement.innerHTML = `
                    <div class="order-history-header">
                        <div>Order #${order.id}</div>
                        <div class="order-history-status ${statusClass}">
                            ${order.status === 'completed' ? 'Completed' : 
                              order.status === 'rejected' ? 'Rejected' :
                              order.status === 'washing' ? 'Washing' :
                              order.status === 'drying' ? 'Drying' :
                              order.status === 'pendingDryer' ? 'Pending Dryer' : 'Pending'}
                        </div>
                    </div>
                    <div class="order-history-details">
                        <img src="${order.image}" alt="Order" class="order-history-img">
                        <div class="order-history-info">
                            <h4>${order.customer}</h4>
                            <p>${order.items}</p>
                            <p>Due: ${order.due}</p>
                            ${completionTime ? `<p>Completed: ${completionTime}</p>` : ''}
                            <button class="view-details-btn">View Details</button>
                            <button class="order-details-btn" data-id="${order.id}">View Full Details</button>
                        </div>
                    </div>
                    <div class="order-history-timeline">
                        ${order.history.map(item => {
                            const itemTime = new Date(item.time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                            return `
                            <div class="timeline-item">
                                <div class="timeline-time">${itemTime}</div>
                                <div class="timeline-event">
                                    <i class="fas fa-circle"></i> ${item.event}
                                    ${item.feedback ? `<p style="margin-left:25px;color:#666;">Feedback: ${item.feedback}</p>` : ''}
                                </div>
                            </div>
                        `}).join('')}
                    </div>
                `;
                
                orderHistoryContainer.appendChild(orderElement);
            });
            
            orderHistoryModal.style.display = 'flex';
        }

        function showOrderDetails(orderId) {
            const order = orderHistory.find(item => item.id === orderId);
            if (!order) return;
            
            const orderDetailsContainer = document.getElementById('orderDetailsContainer');
            orderDetailsContainer.innerHTML = '';
            
            // Determine status class
            let statusClass = '';
            if (order.status === 'completed') {
                statusClass = 'status-done';
            } else if (order.status === 'rejected') {
                statusClass = 'status-rejected';
            } else if (order.status === 'washing') {
                statusClass = 'status-washing';
            } else if (order.status === 'drying') {
                statusClass = 'status-drying';
            } else if (order.status === 'pendingDryer') {
                statusClass = 'status-pending-dryer';
            } else {
                statusClass = 'status-pending';
            }
            
            // Format completion time
            let completionTime = '';
            if (order.completionTime) {
                completionTime = new Date(order.completionTime).toLocaleString();
            }
            
            // Create order details element
            const orderDetails = document.createElement('div');
            orderDetails.className = 'order-history-item';
            orderDetails.innerHTML = `
                <div class="order-history-header">
                    <div>Order #${order.id}</div>
                    <div class="order-history-status ${statusClass}">
                        ${order.status === 'completed' ? 'Completed' : 
                          order.status === 'rejected' ? 'Rejected' :
                          order.status === 'washing' ? 'Washing' :
                          order.status === 'drying' ? 'Drying' :
                          order.status === 'pendingDryer' ? 'Pending Dryer' : 'Pending'}
                    </div>
                </div>
                <div class="order-history-details">
                    <img src="${order.image}" alt="Order" class="order-history-img">
                    <div class="order-history-info">
                        <h4>${order.customer}</h4>
                        <p>${order.items}</p>
                        <p>Due: ${order.due}</p>
                        ${completionTime ? `<p>Completed: ${completionTime}</p>` : ''}
                    </div>
                </div>
                <div class="order-history-timeline" style="display:block;">
                    <h4>Order Timeline:</h4>
                    ${order.history.map(item => {
                        const itemTime = new Date(item.time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                        return `
                        <div class="timeline-item">
                            <div class="timeline-time">${itemTime}</div>
                            <div class="timeline-event">
                                <i class="fas fa-circle"></i> ${item.event}
                                ${item.feedback ? `<p style="margin-left:25px;color:#666;">Feedback: ${item.feedback}</p>` : ''}
                            </div>
                        </div>
                    `}).join('')}
                </div>
            `;
            
            orderDetailsContainer.appendChild(orderDetails);
            orderDetailsModal.style.display = 'flex';
        }

        function showAbout() {
            closeAllModals();
            aboutModal.style.display = 'flex';
        }

        function showTerms() {
            closeAllModals();
            termsModal.style.display = 'flex';
        }

        function showPrivacy() {
            closeAllModals();
            privacyModal.style.display = 'flex';
        }

        function showAttendanceDates() {
            closeAllModals();
            showAttendanceRecords();
            attendanceDatesModal.style.display = 'flex';
        }

        function logout() {
            if (confirm("Are you sure you want to log out?")) {
                setLoggedIn(false);
                showLoginOverlay();
                document.body.style.overflow = 'hidden';
            }
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }
    </script>
</body>
</html>
